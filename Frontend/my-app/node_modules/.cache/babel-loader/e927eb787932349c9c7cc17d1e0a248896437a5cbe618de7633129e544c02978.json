{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nconst LocationUpdater = () => {\n  _s();\n  const userId = 'YOUR_LOGGED_IN_USER_ID'; // Replace with actual logic to get the logged-in user ID\n  const [prevLocation, setPrevLocation] = useState(null);\n  useEffect(() => {\n    const updateLocation = async (latitude, longitude) => {\n      try {\n        const response = await fetch(`http://localhost:9000/api/users/${userId}/location`, {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            latitude,\n            longitude\n          })\n        });\n        if (response.ok) {\n          console.log('Updated Location');\n        } else {\n          console.error('Failed to update location');\n        }\n      } catch (error) {\n        console.error('Error updating location:', error);\n      }\n    };\n    const checkLocation = () => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(position => {\n          const {\n            latitude,\n            longitude\n          } = position.coords;\n          const newLocation = {\n            latitude,\n            longitude\n          };\n          if (!prevLocation || prevLocation.latitude !== latitude || prevLocation.longitude !== longitude) {\n            console.log(`Updating location to: (${latitude}, ${longitude})`);\n            updateLocation(latitude, longitude);\n            setPrevLocation(newLocation);\n          } else {\n            console.log('Location has not changed');\n          }\n        }, error => {\n          console.error('Error getting location:', error);\n        });\n      }\n    };\n    const intervalId = setInterval(checkLocation, 10000); // Check location every 10 seconds for testing\n\n    return () => clearInterval(intervalId); // Cleanup on component unmount\n  }, [userId, prevLocation]);\n  return null;\n};\n_s(LocationUpdater, \"xBQKYEqJy7AquKtQ059Av+Vrfqg=\");\n_c = LocationUpdater;\nexport default LocationUpdater;\nvar _c;\n$RefreshReg$(_c, \"LocationUpdater\");","map":{"version":3,"names":["useEffect","useState","LocationUpdater","_s","userId","prevLocation","setPrevLocation","updateLocation","latitude","longitude","response","fetch","method","headers","body","JSON","stringify","ok","console","log","error","checkLocation","navigator","geolocation","getCurrentPosition","position","coords","newLocation","intervalId","setInterval","clearInterval","_c","$RefreshReg$"],"sources":["/Users/prakshayjoshi/Documents/Projects/Chat-App/Frontend/my-app/src/components/LocationUpdater.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nconst LocationUpdater = () => {\n    const userId = 'YOUR_LOGGED_IN_USER_ID'; // Replace with actual logic to get the logged-in user ID\n    const [prevLocation, setPrevLocation] = useState(null);\n\n    useEffect(() => {\n        const updateLocation = async (latitude, longitude) => {\n            try {\n                const response = await fetch(`http://localhost:9000/api/users/${userId}/location`, {\n                    method: 'PATCH',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ latitude, longitude }),\n                });\n\n                if (response.ok) {\n                    console.log('Updated Location');\n                } else {\n                    console.error('Failed to update location');\n                }\n            } catch (error) {\n                console.error('Error updating location:', error);\n            }\n        };\n\n        const checkLocation = () => {\n            if (navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition((position) => {\n                    const { latitude, longitude } = position.coords;\n                    const newLocation = { latitude, longitude };\n\n                    if (!prevLocation || (prevLocation.latitude !== latitude || prevLocation.longitude !== longitude)) {\n                        console.log(`Updating location to: (${latitude}, ${longitude})`);\n                        updateLocation(latitude, longitude);\n                        setPrevLocation(newLocation);\n                    } else {\n                        console.log('Location has not changed');\n                    }\n                }, (error) => {\n                    console.error('Error getting location:', error);\n                });\n            }\n        };\n\n        const intervalId = setInterval(checkLocation, 10000); // Check location every 10 seconds for testing\n\n        return () => clearInterval(intervalId); // Cleanup on component unmount\n    }, [userId, prevLocation]);\n\n    return null;\n};\n\nexport default LocationUpdater;\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAMC,MAAM,GAAG,wBAAwB,CAAC,CAAC;EACzC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EAEtDD,SAAS,CAAC,MAAM;IACZ,MAAMO,cAAc,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,SAAS,KAAK;MAClD,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,mCAAkCP,MAAO,WAAU,EAAE;UAC/EQ,MAAM,EAAE,OAAO;UACfC,OAAO,EAAE;YACL,cAAc,EAAE;UACpB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAER,QAAQ;YAAEC;UAAU,CAAC;QAChD,CAAC,CAAC;QAEF,IAAIC,QAAQ,CAACO,EAAE,EAAE;UACbC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;QACnC,CAAC,MAAM;UACHD,OAAO,CAACE,KAAK,CAAC,2BAA2B,CAAC;QAC9C;MACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;QACZF,OAAO,CAACE,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MACpD;IACJ,CAAC;IAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;MACxB,IAAIC,SAAS,CAACC,WAAW,EAAE;QACvBD,SAAS,CAACC,WAAW,CAACC,kBAAkB,CAAEC,QAAQ,IAAK;UACnD,MAAM;YAAEjB,QAAQ;YAAEC;UAAU,CAAC,GAAGgB,QAAQ,CAACC,MAAM;UAC/C,MAAMC,WAAW,GAAG;YAAEnB,QAAQ;YAAEC;UAAU,CAAC;UAE3C,IAAI,CAACJ,YAAY,IAAKA,YAAY,CAACG,QAAQ,KAAKA,QAAQ,IAAIH,YAAY,CAACI,SAAS,KAAKA,SAAU,EAAE;YAC/FS,OAAO,CAACC,GAAG,CAAE,0BAAyBX,QAAS,KAAIC,SAAU,GAAE,CAAC;YAChEF,cAAc,CAACC,QAAQ,EAAEC,SAAS,CAAC;YACnCH,eAAe,CAACqB,WAAW,CAAC;UAChC,CAAC,MAAM;YACHT,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;UAC3C;QACJ,CAAC,EAAGC,KAAK,IAAK;UACVF,OAAO,CAACE,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QACnD,CAAC,CAAC;MACN;IACJ,CAAC;IAED,MAAMQ,UAAU,GAAGC,WAAW,CAACR,aAAa,EAAE,KAAK,CAAC,CAAC,CAAC;;IAEtD,OAAO,MAAMS,aAAa,CAACF,UAAU,CAAC,CAAC,CAAC;EAC5C,CAAC,EAAE,CAACxB,MAAM,EAAEC,YAAY,CAAC,CAAC;EAE1B,OAAO,IAAI;AACf,CAAC;AAACF,EAAA,CAlDID,eAAe;AAAA6B,EAAA,GAAf7B,eAAe;AAoDrB,eAAeA,eAAe;AAAC,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}